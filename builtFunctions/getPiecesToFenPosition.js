function getPiecesToFEN() {    var fenPosition = "";        for (var i = 8; i >=1; i--) {        for (var j = 1; j <=8; j++) {            // console.log(fenPosition);            if ((pageType == "analysis") || (pageType == "play") || (pageType == "daily") || (pageType == "liveGame") || (pageType == "puzzles")) {                var classNameForPiece = '.piece.square-' + j + i;            }            else {                var classNameForPiece = 'piece.square-0' + j + "0" + i;            }            var pieceDiv = document.querySelector(classNameForPiece);            if (pieceDiv) {                var listOfClasses = pieceDiv.classList;                for (var classInfo in listOfClasses) {                    if (listOfClasses[classInfo][0] == "w") {                        fenPosition = fenPosition + listOfClasses[classInfo][1].toUpperCase();                     }                    else if (listOfClasses[classInfo][0] == "b") {                        fenPosition = fenPosition + listOfClasses[classInfo][1].toLowerCase();                     }                }            }            else {                if (j == 1) {                    fenPosition = fenPosition + "1";                }                else if (!isNaN(fenPosition[fenPosition.length -1])) {                    var referenceNumber = fenPosition[fenPosition.length -1];                    var newNumber = parseInt(referenceNumber) + 1;                    fenPosition = fenPosition.slice(0, -1);                    fenPosition = fenPosition + newNumber;                }                else {                    fenPosition = fenPosition + "1";                }             }        }         fenPosition = fenPosition + "/";    }        fenPosition = fenPosition.slice(0, -1);        // always return fen for white's turn, we will create fen for black's turn in callbacl function    fenPosition = fenPosition + " " + "w" + " KQkq - 0 1";        return fenPosition;} 